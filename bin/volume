#!/usr/bin/env bash
# author: wujian(github.com/wj9559)

_usage(){
echo "Usage: volume [options] [value]
change backlight
  i              info
  +              increase  5%
  -              decrease  5%
  s              set [value]
  m              toggle mute
  -h, --help     display this help and exit"
}
[[ $1 == "-h" || $1 == "--help" ]] && _usage && exit

type -a pactl &>/dev/null
if [[ $? != 0 ]];then
    echo "Please install \"libpulse\""
    exit 1
fi

info(){
amixer | grep -A10 'Master' | sed -rn 's/.*\[([0-9]+%)\].*\[(on|off)\]/\2 \1/p' | sed -n '1p'
}

increase(){
pactl set-sink-volume 0 +5%
info
}

decrease(){
pactl set-sink-volume 0 -5%
info
}

set(){
pactl set-sink-volume 0 $1%
info
}

mute(){
pactl set-sink-mute 0 toggle
info
}

case ${1:-i} in
i         ) info;;
+         ) increase;;
-         ) decrease;;
s         ) set $2;;
m         ) mute;;
esac
